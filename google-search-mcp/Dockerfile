# Generated by https://smithery.ai. See: https://smithery.ai/docs/config#dockerfile
FROM python:3.10-slim-bullseye

# Update system packages to address vulnerabilities
RUN apt-get update && apt-get upgrade -y && apt-get clean && rm -rf /var/lib/apt/lists/*

# Install uv
COPY --from=ghcr.io/astral-sh/uv:latest /uv /bin/uv

# Set a working directory
WORKDIR /app

# Copy only necessary files to leverage Docker layer caching
COPY pyproject.toml uv.lock* README.md ./

# Install Python dependencies using uv
RUN uv sync --frozen

# Copy all files to the container
COPY . .

# Sensitive environment variables should be provided securely at runtime, not in the Dockerfile.
# Example: docker run -e GOOGLE_API_KEY=your_key -e GOOGLE_CSE_ID=your_id ...

# Command to run the MCP server using uvs
CMD ["uv", "run", "google_search_mcp_server.py"]
